---
# Front matter
lang: ru-RU
title: "Лабораторная работа №8"
author: "Бабков Дмитрий Николаевич"

# Formatting
toc-title: "Содержание"
toc: true # Table of contents
toc_depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4paper
documentclass: scrreprt
polyglossia-lang: russian
polyglossia-otherlangs: english
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase
indent: true
pdf-engine: lualatex
header-includes:
  - \linepenalty=10 # the penalty added to the badness of each line within a paragraph (no associated penalty node) Increasing the value makes tex try to have fewer lines in the paragraph.
  - \interlinepenalty=0 # value of the penalty (node) added after each line of a paragraph.
  - \hyphenpenalty=50 # the penalty for line breaking at an automatically inserted hyphen
  - \exhyphenpenalty=50 # the penalty for line breaking at an explicit hyphen
  - \binoppenalty=700 # the penalty for breaking a line at a binary operator
  - \relpenalty=500 # the penalty for breaking a line at a relation
  - \clubpenalty=150 # extra penalty for breaking after first line of a paragraph
  - \widowpenalty=150 # extra penalty for breaking before last line of a paragraph
  - \displaywidowpenalty=50 # extra penalty for breaking before last line before a display math
  - \brokenpenalty=100 # extra penalty for page breaking after a hyphenated line
  - \predisplaypenalty=10000 # penalty for breaking before a display
  - \postdisplaypenalty=0 # penalty for breaking after a display
  - \floatingpenalty = 20000 # penalty for splitting an insertion (can only be split footnote in standard LaTeX)
  - \raggedbottom # or \flushbottom
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы 

Освоение основных возможностей командной оболочки Midnight Commander.
Приобретение навыков практической работы по просмотру каталогов и файлов; манипуляций с ними.  

# Задание  

Освоить основные возможности командной оболочки Midnight Commander.
Приобрести навыки практической работы по просмотру каталогов и файлов; манипуляций с ними.  

# Ход работы  

## Задание по MC  
1. Изучим информацию о mc, вызвав в командной строке man mc (Рис.1):  
![Рис.1](images/manmc.png)Рис.1  

2. Запустим из командной строки mc, изучим его структуру и меню (Рис.2, 3):  
![Рис.2](images/mccommand.png)Рис.2  
![Рис.3](images/mc.png)Рис.3  

3. Выполним несколько операций в mc, используя управляющие клавиши: переключимся между панелями с помощью клавиши **Tab** (Рис.4), выделим и отменим выделение клавишей **Insert** (Рис.5, 6), скопируем файл (Рис.7, 8):  
![Рис.4](images/opertabfin.png)Рис.4  
![Рис.5](images/insertMark.png)Рис.5  
![Рис.6](images/insertcancelmark.png)Рис.6  
![Рис.7](images/copystart.png)Рис.7  
![Рис.8](images/copyresult.png)Рис.8  

4. Выполним основные команды меню левой панели  
  4.1 Команда **Info** (Рис.9)  
  ![Рис.9](images/leftinfo.png)Рис.9  
  4.2 Команда **Quick View** (Рис.10)  
  ![Рис.10](images/leftQView.png)Рис.10  
  4.3 Команда **Tree** (Рис.11)  
  ![Рис.11](images/leftTree.png)Рис.11  

5. Используя возможности подменю **Файл**, выполним следующие действия:  
  - просмотр содержимого текстового файла (Рис.12, 13);  
  ![Рис.12](images/checkviewpath.png)Рис.12  
  ![Рис.13](images/checkview.png)Рис.13  
  
  - редактирование содержимого текстового файла (без сохранения результатов
редактирования) (Рис.14, 15, 16);  
  ![Рис.14](images/checkeditpath.png)Рис.14  
  ![Рис.15](images/checkedit.png)Рис.15  
  ![Рис.16](images/dontsave.png)Рис.16  

- создание каталога (Рис.17, 18);  
  ![Рис.17](images/mkdirpath.png)Рис.17  
  ![Рис.18](images/dircheck.png)Рис.18  

- копирование в файлов в созданный каталог (Рис. 19, 20, 21).  
  ![Рис.19](images/secondcopypath.png)Рис.19  
  ![Рис.20](images/secondcopystart.png)Рис.20  
  ![Рис.21](images/secondcopyresult.png)Рис.21  

6. С помощью соответствующих средств подменю **Команда** осуществим:  
- поиск в файловой системе файла с заданными условиями (Рис.22, 23, 24);  
  ![Рис.22](images/findfilepath.png)Рис.22  
  ![Рис.23](images/findfileoptions.png)Рис.23  
  ![Рис.24](images/findfileresult.png)Рис.24  

- выбор и повторение одной из предыдущих команд (Рис.25, 26, 27);  
  ![Рис.25](images/historypath.png)Рис.25  
  ![Рис.26](images/historyresult.png)Рис.26  
  ![Рис.27](images/historyrepeatcommand.png)Рис.27  

- переход в домашний каталог (Рис.28, 29, 30, 31);
  ![Рис.28](images/dirhotpath.png)Рис.28  
  ![Рис.29](images/dirhotadd.png)Рис.29  
  ![Рис.30](images/dirhotchangeto.png)Рис.30  
  ![Рис.31](images/dirhotchanged.png)Рис.31  

- анализ файла меню и файла расширений (Рис.32, 33, 34, 35):  
  ![Рис.32](images/extandmenufilespath.png)Рис.32  
  ![Рис.33](images/extfile.png)Рис.33  
  ![Рис.34](images/menufileoptions.png)Рис.34  
  ![Рис.35](images/menufilelocal.png)Рис.35  

## Задание по встроенному редактору mc  

1. Создадим и откроем текстовый файл в редакторе mc (Рис.36):
![Рис.36](images/createandedittext.png)Рис.36  
2. Вставим в открытый файл небольшой фрагмент текста, скопированный из любого другого файла или Интернета с помощью комбинации клавиш **Shift + Insert** (Рис, 37):  
![Рис.37](images/txtinsert.png)Рис.37  
3. Проделаем с текстом следующие манипуляции, используя горячие клавиши:  
  3.1. Удалим строку текста с помощью комбинации **Ctrl+Y** (Рис.38).
  ![Рис.38](images/txtctrly.png)Рис.38  
  3.2. Выделим фрагмент текста c помощью клавиши **F3** и скопируем его на новую строку клавишей **F5** (Рис.39)  
  ![Рис.39](images/txtcopy.png)Рис.39  
  3.3. Выделим фрагмент текста и перенесем его на новую строку клавишей **F6** (Рис.40).  
  ![Рис.40](images/txtmove.png)Рис.40  
  3.4. Сохраним файл клавишей **F2** (Рис.41).  
  ![Рис.41](images/txtsave.png)Рис.41  
  3.5. Отменим последнее действие комбинацей **Ctrl+U** (Рис.42).  
  ![Рис.42](images/txtundo.png)Рис.42  
  3.6. Перейдите в конец файла (**Ctrl+End**) и напишите некоторый текст. Проделаем то же самое в начале файла (**Ctrl+Home**) (Рис.43)  
  ![Рис.43](images/beginEnd.png)Рис.43  
  3.8. Сохраним и закроем файл комбинацией **Esc+0** (Рис.44)  
  ![Рис.44](images/txtsavequit.png)Рис.44  

4. Откроем файл с исходным текстом на языке С++ клавишей **F4** (Рис.45, 46)  
![Рис.45](images/cpp.png)Рис.45  
![Рис.46](images/cppinsides.png)Рис.46  

5. Используя меня редактора (**F9**) выключим подсветку синтаксиса (Рис.47, 48, 49)  
![Рис.47](images/highlightingpath.png)Рис.47  
![Рис.48](images/cppinsideswithouthighlighting.png)Рис.48  

# Выводы  

Я освоил основные возможности командной оболочки Midnight Commander и приобрел навыки практической работы по просмотру каталогов и файлов, а также манипуляций с ними.  

# Контрольные вопросы  

1) Панели могут дополнительно быть переведены в один из двух режимов: **Информация** или **Дерево**. В режиме **Информация** на панель выводятся сведения о файле и текущей файловой системе, расположенных на активной панели. В режиме **Дерево** на одной из панелей выводится структура дерева каталогов.
2) Как с помощью команд shell, так и с помощью меню (комбинаций клавиш) mc можно выполнить следующие операции с файлами:  
- копирование **F5** (**cp имя_файла имя_каталога(в который копируем)**)
- перемещение/переименование **F6** (**mv имя_файла
имя_каталога(в который перемещаем)**) (Рисунок 15)
- создание каталога **F7** (**mkdir имя_каталога**) (Рисунок 38)
- удаление **F8** (**rm имя_файла**)
- изменение прав доступа **ctrl+x** (**chmod u+x имя_файла**)
3) Перейти в строку меню панелей mc можно с помощью
функциональной клавиши **F9**. В строке меню имеются пять меню:
**Левая панель**, **Файл**, **Команда**, **Настройки** и **Правая
панель**.  
Подпункт меню **Быстрый просмотр** позволяет выполнить быстрый
просмотр содержимого панели.  
Подпункт меню **Информация** позволяет посмотреть информацию о
файле или каталоге.  
В меню каждой (левой или правой) панели можно выбрать **Формат
списка**:
- стандартный − выводит список файлов и каталогов с указанием
размера и времени правки;
- ускоренный − позволяет задать число столбцов, на которые
разбивается панель при выводе списка имён файлов или
каталогов без дополнительной информации;
- расширенный − помимо названия файла или каталога выводит
сведения о правах доступа, владельце, группе, размере,
времени правки;
- определённый пользователем − позволяет вывести те сведения
о файле или каталоге, которые задаст сам пользователь.
Подпункт меню **Порядок сортировки** позволяет задать критерии
сортировки при выводе списка файлов и каталогов: без сортировки,
по имени, расширенный, время правки, время доступа, время
изменения атрибута, размер, узел.
4) Команды меню **Файл**:
- Просмотр (**F3**) − позволяет посмотреть содержимое текущего
(или выделенного) файла без возможности редактирования.
- Просмотр вывода команды (**М** + **!**) − функция запроса
команды с параметрами (аргумент к текущему выбранному
файлу).
- Правка (**F4**) − открывает текущий (или выделенный) файл
для его редактирования.
- Копирование (**F5**) − осуществляет копирование одного или
нескольких файлов или каталогов в указанное пользователем во
всплывающем окне место.
- Права доступа (**Ctrl-x** **c**) − позволяет указать (изменить)
права доступа к одному или нескольким файлам или каталогам.
- Жёсткая ссылка (**Ctrl-x** **l**) − позволяет создать жёсткую
ссылку к текущему (или выделенному) файлу.
- Символическая ссылка (**Ctrl-x** **s**) − позволяет создать
символическую ссылку к текущему (или выделенному) файлу.
- Владелец/группа (**Ctrl-x** **o**) − позволяет задать (изменить)
владельца и имя группы для одного или нескольких файлов или
каталогов.
- Права (расширенные) − позволяет изменить права доступа и
владения для одного или нескольких файлов или каталогов.
- Переименование (**F6**) − позволяет переименовать (или
переместить) один или несколько файлов или каталогов.
- Создание каталога (**F7**) − позволяет создать каталог.
- Удалить (**F8**) − позволяет удалить один или несколько файлов
или каталогов.
- Выход (**F10**) − завершает работу mc.
5) Меню Команда  
В меню Команда содержатся более общие команды для работы с mc.
Команды меню Команда:
- Дерево каталогов − отображает структуру каталогов системы.
- Поиск файла − выполняет поиск файлов по заданным
параметрам.
- Переставить панели − меняет местами левую и правую панели.
- Сравнить каталоги (**Ctrl-x** **d**) − сравнивает содержимое
двух каталогов.
- Размеры каталогов − отображает размер и время изменения
каталога (по умолчанию в mc размер каталога корректно не
отображается).
- История командной строки − выводит на экран список ранее
выполненных в оболочке команд.
- Каталоги быстрого доступа ( Ctrl-\**) − при вызове выполняется
быстрая смена текущего каталога на один из заданного списка.
- Восстановление файлов − позволяет восстановить файлы на
файловых системах ext2 и ext3.
- Редактировать файл расширений − позволяет задать с помощью
определённого синтаксиса действия при запуске файлов с
определённым расширением (например, какое программного
обеспечение запускать для открытия или редактирования
файлов с расширением doc или docx).
- Редактировать файл меню − позволяет отредактировать
контекстное меню пользователя, вызываемое по клавише **F2**.
- Редактировать файл расцветки имён − позволяет подобрать
оптимальную для пользователя расцветку имён файлов в
зависимости от их типа.
6) Меню Настройки содержит ряд дополнительных опций по внешнему
виду и функциональности mc.  
Меню Настройки содержит:
- Конфигурация − позволяет скорректировать настройки работы
с панелями.
- Внешний вид и Настройки панелей − определяет элементы
(строка меню, командная строка, подсказки и прочее),
отображаемые при вызове mc, а также геометрию
расположения панелей и цветовыделение.
- Биты символов − задаёт формат обработки информации
локальным терминалом.
- Подтверждение − позволяет установить или убрать вывод окна
с запросом подтверждения действий при операциях удаления и
перезаписи файлов, а также при выходе из программы.
- Распознание клавиш − диалоговое окно используется для
тестирования функциональных клавиш, клавиш управления
курсором и прочее.
- Виртуальные ФС − настройки виртуальной файловой системы:
тайм-аут, пароль и прочее.
7) Функциональные клавиши mc:
- F1 – вызов контекстно-зависимой подсказки
- F2 – вызов пользовательского меню с возможностью создания
и/или дополнения дополнительных функций
- F3 – просмотр содержимого файла, на который указывает
подсветка в активной панели (без возможности
редактирования)
- F4 – вызов встроенного в mc редактора для изменения
содержания файла, на который указывает подсветка в активной
панели
- F5 – копирование одного или нескольких файлов, отмеченных
в первой (активной) панели, в каталог, отображаемый на второй
панели
- F6 – перенос одного или нескольких файлов, отмеченных в
первой (активной) панели, в каталог, отображаемый на второй
панели
- F7 – создание подкаталога в каталоге, отображаемом в активной
панели
- F8 – удаление одного или нескольких файлов (каталогов),
отмеченных в первой (активной) панели файлов
- F9 – вызов меню mc
- F10 – выход из mc
8) Встроенный в mc редактор вызывается с помощью функциональной
клавиши **F4**. В нём удобно использовать различные комбинации
клавиш при редактировании содержимого (как правило текстового)
файла.
Клавиши для редактирования файла:
- **Ctrl-y** − удалить строку
- **Ctrl-u** − отмена последней операции
- **ins** вставка/замена
- **F7** − поиск (можно использовать регулярные выражения)
- **Shift+F7** − повтор последней операции поиска
- **F4** − замена
- **F3** − первое нажатие − начало выделения, второе − окончание
выделения
- **F5** − копировать выделенный фрагмент
- **F6** − переместить выделенный фрагмент
- **F8** − удалить выделенный фрагмент
- **F2** − записать изменения в файл
- **F10** − выйти из редактор
9) Для редактирования меню пользователя, которое вызывается
клавишей **F2**, необходимо перейти в пункт **Редактировать файл
меню** -> **Команда** и изменить настройки файла.
10) Часть команд **Меню пользователя**, а также меню **Файл**
позволяют выполнять действия, определяемые пользователем, над
текущим файлом. Например, копирование каталога или файла,
переименование, перемещение, архивирование.